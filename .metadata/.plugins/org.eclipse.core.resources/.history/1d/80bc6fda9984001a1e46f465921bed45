package com.aeox.jkaiser.plugins.logger;
import com.aeox.jkaiser.core.JobContext;
import com.aeox.jkaiser.core.Result;
import com.aeox.jkaiser.core.Status;
import com.aeox.jkaiser.core.Task;
import com.aeox.jkaiser.core.exception.KaiserException;

import lombok.extern.log4j.Log4j2;

@Log4j2
public class LoggerTask extends Task{
	
	@Override
	public Result onCall(JobContext context) throws KaiserException {		
		return new Result<String>() {

			@Override
			public String getResult() {
				return context.getKeys().stream().map((key) -> key + ":" + context.getParameter(key)).toString();
			}

			@Override
			public boolean wasError() {
				return false;
			}
		};
	}

	@Override
	public String getName() {
		return "jkaiser-logger";
	}

	@Override
	public String getVersion() {
		return "1.0";
	}

	@Override
	public String getDescription() {
		return "Logs all parameters stored in the context";
	}	
}
